<th:block th:fragment="jumbotron">
    <div class="my-3">
        <div class="p-1 text-center" style="background-color: #73da0c">
            <div class="container py-5">
                <!-- User not authorized -->
                <div th:if="${#authorization.expression('hasRole(''ROLE_ANONYMOUS'')')}"><br>
                    <h1>WELCOME TO UNIVERSITY GUEST!</h1>
                    <h2><span th:if="${pagePurpose != null}" th:text="${pagePurpose}"></span></h2>
                    <h4>For select one of available options authorize, please!
                    If you have no account, please register!</h4>
                    <p>You visited university site's main page. To have possibility
                        to use any option on this page you have to be authorized! </p>
                </div>

                <!-- User authorized -->
                <div th:unless="${#authorization.expression('hasRole(''ROLE_ANONYMOUS'')')}"><br>
                    <h1><span th:if="${pagePurpose != null}" th:text="${pagePurpose}"></span></h1>
                    <h3>WELCOME BACK, USER <span th:remove="tag" sec:authentication="name">tag</span>!
                        <div>Your access level - <strong><span th:remove="tag" sec:authentication="authorities">tag</span></strong>!</div></h3>
                    <p><span th:if="${jumbotronMessage != null}" th:text="${jumbotronMessage}">s</span></p>
                </div>
            </div>
        </div>
    </div>
</th:block>

<th:block th:fragment="languages">
    <html lang=en xmlns:th="https://www.thymeleaf.org"
          xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
          xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
</th:block>

<th:block th:fragment="meta">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</th:block>

<th:block th:fragment="styles">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/perfect-scrollbar/1.5.2/css/perfect-scrollbar.min.css" integrity="sha512-ygIxOy3hmN2fzGeNqys7ymuBgwSCet0LVfqQbWY10AszPMn2rB9JY0eoG0m1pySicu+nvORrBmhHVSt7+GI9VA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        table, th, td {
            border: 2px solid; font-size: 16px;
        }
    </style>
</th:block>

<th:block th:fragment="log-form">
    <br><br>
    <div style="width:700px" class="container-fluid bg-dark text-bg-dark" align="center">
        <div class="row flex-column" align="center">
            <div class="header" align="center"><h1>Authorization</h1></div>
            <br>
            <form class="form" action="#" th:action="@{/login}" method="Post">
                <br>
                <div th:if="${message != null}"><h3 th:text="${message}"></h3></div>
                <div class="mb-2">
                    <label for="log" class="form-label"><h3>Login</h3></label>
                    <input type="text" class="form-control" id="log" placeholder="Username..." th:name="username"/>
                </div>
                <br>
                <div class="mb-2">
                    <label for="pass" class="form-label"><h3>Password</h3></label>
                    <input type="password" class="form-control" placeholder="Password..." id="pass" th:name="password" />
                </div>
                <div class="mb-4 form-check">
                    <input type="checkbox" class="form-check-input" id="remember-me" />
                    <label  class="form-check-label" for="remember-me">Remember me</label>
                </div>
                <div class="text-center">
                    <div class="btn-group-lg">
                        <button type="submit" class="btn btn-outline-warning">Sign in</button>
                        <button type="reset" class="btn btn-outline-success"> Reset  </button>
                        <br>
                        <br>
                    </div>
                </div>
            </form>
            <form action="#" th:action="@{/registration}">
                <button type="submit" class="btn btn-outline-warning btn-lg">Registration</button>
            </form>
        </div>
    </div>
</th:block>

<th:block th:fragment="reg-form">
    <br><br>
    <div style="width:700px" class="container-fluid bg-dark text-bg-dark" align="center">
        <div class="row flex-column" align="center">
            <div class="header" align="center"><h1>Authorization</h1></div>
            <br>
            <form class="form" action="#" th:href="@{/registration}" method="post">
                <br>
                <div th:if="${error != null}"><h3 th:text="${error}"></h3></div>
                <div th:if="${message != null}"><h3 th:text="${message}"></h3></div>
                <div class="mb-2">
                    <label for="reg-log" class="form-label"><h3>Login</h3></label>
                    <input type="text" class="form-control" id="reg-log" name="login" placeholder="Username..." th:name="login" autofocus="autofocus"/>
                </div>
                <br>
                <div class="mb-2">
                    <label for="pass-reg" class="form-label"><h3>Password</h3></label>
                    <input type="password" class="form-control" placeholder="Password..." id="pass-reg" name="pass-reg" th:name="password" />
                </div>
                <div class="mb-2">
                    <label for="conf-pass" class="form-label"><h3>Password confirm</h3></label>
                    <input type="password" class="form-control" placeholder="Password confirm..." name="conf-pass" th:name="confirmPassword" id="conf-pass"/>
                </div>
                <div class="text-center">
                    <div class="btn-group-lg">
                        <button type="submit" class="btn btn-outline-warning">Register</button>
                        <button type="reset" class="btn btn-outline-success">Reset</button>
                        <br>
                        <br>
                    </div>
                </div>
            </form>
        </div>
    </div>
</th:block>


<th:block th:fragment="navbar">
    <div th:if="${#authorization.expression('hasRole(''ROLE_ANONYMOUS'')')}">
        <th:block th:insert="~{fragments/common.html::navbar-notAuth}"></th:block>
    </div>
    <div th:unless="${#authorization.expression('hasRole(''ROLE_ANONYMOUS'')')}">
        <th:block th:insert="~{fragments/common.html::navbar-auth}"></th:block>
    </div>
</th:block>

<th:block th:fragment="navbar-notAuth">
    <div class="navbar navbar-dark bg-dark mb-4" type="inline">
        <form class="form-check-inline" action="#" th:action="@{/}">
            <button type="submit" class="btn btn-outline-warning">Home</button>
        </form>
        <div><h1 style="color: #0a550a">UNIVERSITY</h1></div>
        <div class="btn-group" role="group">
            <div class="d-inline-flex p-2">
                <form class="form" action="#" th:action="@{/login}">
                    <button type="submit" class="btn btn-outline-warning">SignIn</button>
                </form>
            </div>
            <div class="d-inline-flex p-2">
                <form class="form" action="#" th:action="@{/registration}">
                    <button type="submit" class="btn btn-outline-warning">SignUp</button>
                </form>
            </div>
        </div>
    </div>
</th:block>

<th:block th:fragment="administration">
    <form class="form-check-inline" action="#" th:action="@{/admin/users/all-users}">
        <button type="submit" class="btn btn-outline-warning btn-sm">Administration</button>
    </form>
</th:block>

<th:block th:fragment="navbar-auth">
    <div class="navbar navbar-dark bg-dark mb-4">
        <form class="form-check-inline" action="#" th:action="@{/}">
            <button type="submit" class="btn btn-outline-warning">Home</button>
        </form>
        <div><h1 style="color: #0a550a">UNIVERSITY</h1></div>
        <div class="btn-group" role="group">
            <div th:if="${#authorization.expression('hasRole(''ROLE_ADMIN'')')}">
                <th:block th:insert="~{fragments/common::administration}"></th:block>
            </div>
            <form class="form-check-inline" aline="right-center" action="#" th:action="@{/logout}">
                <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
                <button type="submit" class="btn btn-danger btn-sm">Logout</button>
            </form>
        </div>
    </div>
</th:block>

<th:block th:fragment="scripts">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/perfect-scrollbar/1.5.2/perfect-scrollbar.min.js" integrity="sha512-byagY9YdfRsmvM/9ld4XQ9mvd9uNhNOaMzvCYpPw1CLuoIXAdWR8/6rHjRwuWy0Pi+JGWjDHiE7tVGhtPd21ZQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</th:block>

<th:block th:fragment="sidebar">
    <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-dark">
        <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">
            <a href="/" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                <span class="fs-5 d-none d-sm-inline"><h5>Menu</h5></span>
            </a>
            <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
                <li class="nav-item">
                    <a href="#" th:href="@{/}" class="nav-link align-middle px-0">
                        <i class="fs-4 bi-house"></i> <span class="ms-1 d-none d-sm-inline"><h6>Home</h6></span>
                    </a>
                </li>
                <li>
                    <a href="#submenu1" data-bs-toggle="collapse" class="nav-link px-0 align-middle">
                        <i class="fs-4 bi-speedometer2"></i> <span class="ms-1 d-none d-sm-inline"><h6>Students</h6></span> </a>
                    <ul class="collapse nav flex-column ms-1" id="submenu1" data-bs-parent="#menu">
                        <li class="w-100">
                            <!--    Start of Students sub menu's sub cases      -->
                            <form th:action="@{/lecturer/students/all}">
                                <button type="submit" class="btn flex-grow-1 btn-outline-warning" >Get all students</button>
                            </form>
                        </li>
                        <br>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/students/}">
                                <label for="sId1">Get student by id</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Id..." id="sId1" name="sId1" th:name="studentId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/students/group-students}">
                                <label for="gId1">Get students in group:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-sm-row" placeholder="Group id..." id="gId1" name="gId1" th:name="groupId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#submenu2" data-bs-toggle="collapse" class="nav-link px-0 align-middle">
                        <i class="fs-4 bi-speedometer2"></i> <span class="ms-1 d-none d-sm-inline"><h6>Lecturers</h6></span> </a>
                    <ul class="collapse nav flex-column ms-1" id="submenu2" data-bs-parent="#menu">
                        <!--    Start of Lecturers sub menu's sub cases    -->
                        <li class="w-100">
                            <form th:action="@{/lecturers/all}">
                                <button type="submit" class="btn flex-grow-1 btn-outline-warning" >Get all lecturers</button>
                            </form>
                        </li>
                        <br>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/lecturers/}">
                                <label for="lId1">Get lecturer by id:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Id..." th:name="lecturerId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/lecturers/course-lecturers}">
                                <label for="gId1">Get lecturers on course:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-sm-row" placeholder="Course id..." id="cId1" name="cId1" th:name="courseId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#submenu3" data-bs-toggle="collapse" class="nav-link px-0 align-middle ">
                        <i class="fs-4 bi-bootstrap"></i> <span class="ms-1 d-none d-sm-inline"><h6>Courses</h6></span></a>
                    <ul class="collapse nav flex-column ms-1" id="submenu3" data-bs-parent="#menu">
                        <!-- Start of Courses sub menu's sub cases -->
                        <li class="w-100">
                            <form th:action="@{/common/courses/all}">
                                <button type="submit" class="btn flex-grow-1 btn-outline-warning" >Get all courses</button>
                            </form>
                        </li>
                        <br>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/courses/}">
                                <label for="cId2">Get course by id:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Course id..." id="cId2" name="cId2" th:name="courseId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/courses/lecturer-course}">
                                <label for="lrId2">Get lecturers on course:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-sm-row" placeholder="Lecturer id..." id="lrId2" name="lrId2" th:name="lecturerId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/courses/group-courses}">
                                <label for="grId2">Get lecturers on course:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-sm-row" placeholder="Group id..." id="grId2" th:name="groupId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/courses/lecture-course}">
                                <label for="lId1">Get lectures on course:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-sm-row" placeholder="Lecture id..." id="lId1" th:name="lectureId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#submenu4" data-bs-toggle="collapse" class="nav-link px-0 align-middle">
                        <i class="fs-4 bi-grid"></i> <span class="ms-1 d-none d-sm-inline"><h6>Groups</h6></span> </a>
                    <ul class="collapse nav flex-column ms-1" id="submenu4" data-bs-parent="#menu">
                        <!-- Start of Groups sub menu's sub cases -->
                        <li class="w-100">
                            <form th:action="@{/common/groups/all}">
                                <button type="submit" class="btn flex-grow-1 btn-outline-warning" >Get all groups</button>
                            </form>
                        </li>
                        <br>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/groups/}">
                                <label for="gId2">Get group by id:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Group id..." id="gId2" name="gId2" th:name="groupId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/groups/student-group}">
                                <label for="sId2">Get student's group:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Student id..." id="sId2" name="sId2" th:name="studentId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/groups/lecture-groups}">
                                <label for="lId2">Get groups on lecture by id:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Lecture id..." id="lId2" name="lId2" th:name="lectureId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/groups/course-groups}">
                                <label for="lId2">Get groups on course by course id:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Course id..." th:name="courseId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#submenu7" data-bs-toggle="collapse" class="nav-link px-0 align-middle">
                        <i class="fs-4 bi-grid"></i> <span class="ms-1 d-none d-sm-inline"><h6>Lectures</h6></span> </a>
                    <ul class="collapse nav flex-column ms-1" id="submenu7" data-bs-parent="#menu">
                        <!-- Start of lectures sub menu's sub cases -->
                        <li class="w-100">
                            <form th:action="@{/lecturer/lectures/all}">
                                <button type="submit" class="btn flex-grow-1 btn-outline-warning" >Get all lectures</button>
                            </form>
                        </li>
                        <br>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/lectures/}">
                                <label for="gId2">Get by id:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Lecture..." id="lId3" th:name="lectureId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/common/lectures/group-lectures}">
                                <label for="sId2">Get group lectures:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Group..." id="gId4" th:name="groupId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                        <li>
                            <form action="#" class="form-inline" th:action="@{/lecturer/lectures/course-lectures}">
                                <label for="lId2">Get course lectures:</label>
                                <div class="input-group mb-md-4">
                                    <input type="number" class="form-control flex-grow-1" placeholder="Course..." id="cId4" th:name="courseId"/>
                                    <button type="submit" class="btn btn-outline-warning btn-sm">Get</button>
                                </div>
                            </form>
                        </li>
                    </ul>
                </li>
                <th:block th:insert="~{fragments/staff::sidebar-staff-functions}"></th:block>
                <th:block th:insert="~{fragments/admin::users-for-sidebar}"></th:block>
            </ul>
            <hr>
            <div class="dropdown pb-4">
                <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="https://github.com/mdo.png" alt="hugenerd" width="30" height="30" class="rounded-circle">
                    <span class="d-none d-sm-inline mx-1"><span th:remove="tag" sec:authentication="name">loser</span></span>
                </a>

                    <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <div th:if="${#authorization.expression('hasRole(''ROLE_ANONYMOUS'')')}">
                            <li><a class="dropdown-item" th:href="@{/login}">Sign In</a></li>
                        </div>
                        <div th:unless="${#authorization.expression('hasRole(''ROLE_ANONYMOUS'')')}">
                            <li><a class="dropdown-item" th:href="@{/logout}">Sign out</a></li>
                        </div>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                    </ul>
            </div>
        </div>
    </div>
</th:block>